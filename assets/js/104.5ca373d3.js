(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{501:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"babel-preset-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-preset-env"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://www.babeljs.cn/docs/presets",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("@babel/preset-env")]),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("这是一个预设的插件集合，包含了一组相关的插件。")]),s._v(" "),a("p",[a("code",[s._v("@babel/preset-env")]),s._v(" 主要依赖 "),a("code",[s._v("core-js")]),s._v(" 来处理 api 的兼容性，在升级到 7.4.0 以上的版本以后，既支持"),a("code",[s._v("core-js@2")]),s._v("，也支持"),a("code",[s._v("core-js@3")]),s._v("，所以增加了 corejs 的配置来控制所需的版本。")]),s._v(" "),a("h2",{attrs:{id:"_1-usebuiltins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-usebuiltins"}},[s._v("#")]),s._v(" 1. "),a("code",[s._v("useBuiltIns")])]),s._v(" "),a("p",[a("code",[s._v("useBuiltIns")]),s._v(" 是 babel7 的新功能，这个配置提供了三个选项告诉 babel 该如何引入 polyfill 包：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("false")])])]),s._v(" "),a("p",[s._v("默认值，这种情况下，"),a("code",[s._v("@babel/preset-env")]),s._v("只对语法进行转化（如箭头函数、"),a("code",[s._v("let")]),s._v("、"),a("code",[s._v("const")]),s._v("），不转化Api（如"),a("code",[s._v("Promise")]),s._v("，"),a("code",[s._v("Proxy")]),s._v("）和一些新的实例/静态方法（如"),a("code",[s._v("include")]),s._v("，"),a("code",[s._v("Array.from")]),s._v("），不会导入任何 polyfill 进来，并且 "),a("code",[s._v("corejs")]),s._v(" 配置将无效，所以当然也就无需安装 "),a("code",[s._v("core-js")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("usage")])])]),s._v(" "),a("p",[s._v("代码中不用主动 import，babel 会自动将代码里已使用到的且 browserslist 环境不支持的 polyfill 导入，需要提前安装 "),a("code",[s._v("core-js")]),s._v("（"),a("code",[s._v("yarn add core-js -D")]),s._v("） 并设置 "),a("code",[s._v("corejs")]),s._v(" 版本。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("entry")])])]),s._v(" "),a("p",[s._v("需要在代码运行之前导入，会将 browserslist 环境不支持的所有 polyfill 都导入，需要提前安装 "),a("code",[s._v("core-js")]),s._v(" 并设置 "),a("code",[s._v("corejs")]),s._v(" 版本。")]),s._v(" "),a("p",[s._v("接下来实际操作看一下不同"),a("code",[s._v("useBuiltIns")]),s._v("配置下打包结果有啥区别。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("新建测试项目，安装依赖"),a("code",[s._v("yarn add @babel/core @babel/cli @babel/preset-env -D")])])]),s._v(" "),a("li",[a("p",[s._v("运行 "),a("code",[s._v("npx babel index.js -o dist.js")]),s._v("查看打包输出：")])])]),s._v(" "),a("p",[s._v("以下测试代码：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"实例方法"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"箭头函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ol",[a("li",[a("code",[s._v("useBuiltIns:false")]),s._v(" 打包测试")])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("输出如下图所示，可以看到，"),a("code",[s._v("const")]),s._v(" 变成了"),a("code",[s._v("var")]),s._v("，箭头函数变成了普通函数，但是 api "),a("code",[s._v("Promise")]),s._v(" 和 实例方法"),a("code",[s._v("includes")]),s._v("并没有变。")]),s._v(" "),a("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:s.$withBase("/imgs/zeroToOne/presetEnv-useBuiltIns-false.jpg")}}),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[s._v("useBuiltIns:usage")]),s._v(" + "),a("code",[s._v("corejs 3")]),s._v("打包测试")])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   \n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("输出如下，可以看到，按需引入了 polyfill 的包。")]),s._v(" "),a("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:s.$withBase("/imgs/zeroToOne/presetEnv-useBuiltIns-usage.jpg")}}),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("code",[s._v("useBuiltIns:entry")]),s._v(" + "),a("code",[s._v("corejs 3")]),s._v("打包测试")])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"entry"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("index.js 头部引入这两个包：")]),s._v(" "),a("blockquote",[a("p",[s._v("注：其中"),a("code",[s._v("regenerator-runtime")]),s._v("会在安装"),a("code",[s._v("@babel/preset-env")]),s._v("的时候自动安装，不需要手动安装")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"core-js/stable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"regenerator-runtime/runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])])]),a("p",[s._v("输出如下，所有的 polyfill 包都引进来了：")]),s._v(" "),a("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:s.$withBase("/imgs/zeroToOne/presetEnv-useBuiltIns-entry.jpg")}}),s._v(" "),a("h2",{attrs:{id:"_2-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-modules"}},[s._v("#")]),s._v(" 2. "),a("code",[s._v("modules")])]),s._v(" "),a("p",[s._v("该项用来设置是否把ES6的模块化语法改成其它模块化语法。")]),s._v(" "),a("p",[s._v('取值可以是"amd"、"umd" 、 "systemjs" 、 "commonjs" 、"cjs" 、"auto" 、false。在不设置的时候，取默认值"auto"。')]),s._v(" "),a("ul",[a("li",[a("code",[s._v("auto")]),s._v("：默认值，代码里的 "),a("code",[s._v("import")]),s._v(" 都被转成 "),a("code",[s._v("require")]),s._v(" 。")]),s._v(" "),a("li",[a("code",[s._v("flase")]),s._v("：不对ES6模块化进行更改，还是使用"),a("code",[s._v("import")]),s._v("引入模块")])]),s._v(" "),a("p",[s._v("在我们的测试代码里加一行 "),a("code",[s._v("import")]),s._v(" ：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" xxx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./xxxx"')]),s._v("\n")])])]),a("p",[s._v("同时修改 babel 配置，设置"),a("code",[s._v('"modules": false')]),s._v(",")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// babelrc.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// false，使用 import 导入模块")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("输出结果如下，可以看到我们新增的那行 "),a("code",[s._v("import")]),s._v("语句，同时，其他 polyfill 包引入方式也由之前的"),a("code",[s._v("require")]),s._v("变成"),a("code",[s._v("import")]),s._v("了。")]),s._v(" "),a("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:s.$withBase("/imgs/zeroToOne/presetEnv-modules-false.jpg")}}),s._v(" "),a("h2",{attrs:{id:"_3-targets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-targets"}},[s._v("#")]),s._v(" 3. "),a("code",[s._v("targets")])]),s._v(" "),a("p",[s._v("设置"),a("code",[s._v("@babel/preset-env")]),s._v("目标环境。可以是字符串、字符串数组或对象，不设置的时候取默认值空对象{}。")]),s._v(" "),a("p",[s._v("如果设置了"),a("code",[s._v("targets")]),s._v("，"),a("code",[s._v("@babel/preset-env")]),s._v("就使用"),a("code",[s._v("targets")]),s._v("设置的值加载目标环境缺失的 polyfill，否则就用"),a("code",[s._v("browserslist")]),s._v("的配置，如果两个都没设置，则"),a("code",[s._v("@babel/preset-env")]),s._v("会对代码中所有的 ES6 转 ES5（包括语法/api/实例方法）。")]),s._v(" "),a("p",[s._v("一般情况下，推荐使用"),a("code",[s._v("browserslist")]),s._v("的配置。")]),s._v(" "),a("p",[s._v("还是以之前的测试代码为例，修改 babelrc 配置，设置"),a("code",[s._v('"chrome": "58"')])]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chrome"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"58"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("输出结果如下，发现只引入了 Promise 的 polyfill 包。\n因为 "),a("code",[s._v("chrome:58")]),s._v("本来就支持箭头函数和"),a("code",[s._v("includes")]),s._v("，但是对 Promise 的支持不是很好（到 "),a("a",{attrs:{href:"https://caniuse.com/?search=Promise.finally",target:"_blank",rel:"noopener noreferrer"}},[s._v("caniuse"),a("OutboundLink")],1),s._v(" 上查，发现 "),a("code",[s._v("chrome:58")]),s._v(" 不支持 "),a("code",[s._v("promise.finally")]),s._v("）。")]),s._v(" "),a("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:s.$withBase("/imgs/zeroToOne/presetEnv-targets.jpg")}}),s._v(" "),a("h2",{attrs:{id:"_4-其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-其它"}},[s._v("#")]),s._v(" 4. 其它")]),s._v(" "),a("p",[s._v("从 babel@7 开始，所有针对标准提案阶段的功能所编写的预设（stage preset）都已被弃用，官方已经移除了"),a("code",[s._v("@babel/preset-stage-x")]),s._v("。也就是说只能用来转换那些已经被正式纳入TC39中的语法，无法对那些还在提案中的语法进行处理，对于处在stage 中的语法，需要安装对应的 plugin 进行处理。")])])}),[],!1,null,null,null);t.default=n.exports}}]);