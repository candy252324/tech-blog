(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{518:function(t,e,o){"use strict";o.r(e);var r=o(56),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"概述"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),o("p",[t._v("Git 能在特定的重要动作发生时触发自定义脚本。其中比较常用的 hooks 有："),o("code",[t._v("pre-commit")]),t._v("、"),o("code",[t._v("commit-msg")]),t._v("、"),o("code",[t._v("pre-push")]),t._v(" 等。"),o("a",{attrs:{href:"https://git-scm.com/docs/githooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("更多 hooks"),o("OutboundLink")],1),t._v("。")]),t._v(" "),o("p",[t._v("有了这些 hooks，我们可以做很多事情：")]),t._v(" "),o("ul",[o("li",[o("code",[t._v("pre-commit")]),t._v(" 触发时进行代码格式验证")]),t._v(" "),o("li",[o("code",[t._v("commit-msg")]),t._v(" 触发时对 commit 消息和提交用户进行验证")]),t._v(" "),o("li",[o("code",[t._v("pre-push")]),t._v(" 触发时进行单元测试、e2e 测试等操作")])]),t._v(" "),o("p",[t._v("Git 在执行 "),o("code",[t._v("git init")]),t._v(" 进行初始化时，会在 "),o("code",[t._v(".git/hooks")]),t._v(" 目录生成一系列的 hooks 脚本，如下图所示：")]),t._v(" "),o("img",{staticStyle:{transform:"scale(0.9)"},attrs:{src:t.$withBase("/imgs/zeroToOne/git-hooks.jpg")}}),t._v(" "),o("p",[t._v("可以看到每个脚本的后缀都是以 "),o("code",[t._v(".sample")]),t._v(" 结尾的，在这个时候，脚本是不会自动执行的。我们需要把后缀去掉之后才会生效，即将 "),o("code",[t._v("pre-commit.sample")]),t._v(" 变成 "),o("code",[t._v("pre-commit")]),t._v(" 才会起作用。")]),t._v(" "),o("p",[t._v("我们这里当然不会自己去编写 hooks 脚本，而是使用现成开源的解决方案 "),o("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[t._v("husky"),o("OutboundLink")],1),t._v("。")]),t._v(" "),o("blockquote",[o("p",[t._v("本节内容主要来自于文章"),o("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/391221822",target:"_blank",rel:"noopener noreferrer"}},[t._v("手写 git hooks 脚本"),o("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);