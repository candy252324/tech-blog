<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>配置文件 | 先放番茄后放蛋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/tech-blog/logo.jpg">
    <meta name="description" content="对吗？试试就知道了">
    
    <link rel="preload" href="/tech-blog/assets/css/0.styles.b7ccda1f.css" as="style"><link rel="preload" href="/tech-blog/assets/js/app.0f97b9d9.js" as="script"><link rel="preload" href="/tech-blog/assets/js/2.b3ff26a2.js" as="script"><link rel="preload" href="/tech-blog/assets/js/115.858153e2.js" as="script"><link rel="prefetch" href="/tech-blog/assets/js/10.ecbc9340.js"><link rel="prefetch" href="/tech-blog/assets/js/100.cf268c90.js"><link rel="prefetch" href="/tech-blog/assets/js/101.10df5ade.js"><link rel="prefetch" href="/tech-blog/assets/js/102.392aecdb.js"><link rel="prefetch" href="/tech-blog/assets/js/103.ca421b47.js"><link rel="prefetch" href="/tech-blog/assets/js/104.5ca373d3.js"><link rel="prefetch" href="/tech-blog/assets/js/105.75b84e9b.js"><link rel="prefetch" href="/tech-blog/assets/js/106.6024dad1.js"><link rel="prefetch" href="/tech-blog/assets/js/107.91c40eed.js"><link rel="prefetch" href="/tech-blog/assets/js/108.5a316cf3.js"><link rel="prefetch" href="/tech-blog/assets/js/109.286ca857.js"><link rel="prefetch" href="/tech-blog/assets/js/11.7f537050.js"><link rel="prefetch" href="/tech-blog/assets/js/110.643954ef.js"><link rel="prefetch" href="/tech-blog/assets/js/111.239f0761.js"><link rel="prefetch" href="/tech-blog/assets/js/112.1936c4d6.js"><link rel="prefetch" href="/tech-blog/assets/js/113.da6893e3.js"><link rel="prefetch" href="/tech-blog/assets/js/114.8c3cdf27.js"><link rel="prefetch" href="/tech-blog/assets/js/116.e82fdcfd.js"><link rel="prefetch" href="/tech-blog/assets/js/117.2b2fa5a1.js"><link rel="prefetch" href="/tech-blog/assets/js/118.7a92923b.js"><link rel="prefetch" href="/tech-blog/assets/js/119.23ef3714.js"><link rel="prefetch" href="/tech-blog/assets/js/12.3c69c0b4.js"><link rel="prefetch" href="/tech-blog/assets/js/120.8876470b.js"><link rel="prefetch" href="/tech-blog/assets/js/121.aebbd123.js"><link rel="prefetch" href="/tech-blog/assets/js/122.b7ec94ed.js"><link rel="prefetch" href="/tech-blog/assets/js/123.1e5fda8f.js"><link rel="prefetch" href="/tech-blog/assets/js/124.9d2cbbf1.js"><link rel="prefetch" href="/tech-blog/assets/js/125.9009636a.js"><link rel="prefetch" href="/tech-blog/assets/js/126.0772ef71.js"><link rel="prefetch" href="/tech-blog/assets/js/127.094e3f0b.js"><link rel="prefetch" href="/tech-blog/assets/js/128.fe783ca3.js"><link rel="prefetch" href="/tech-blog/assets/js/129.f7450f1d.js"><link rel="prefetch" href="/tech-blog/assets/js/13.33d9cb1c.js"><link rel="prefetch" href="/tech-blog/assets/js/130.c7f6e451.js"><link rel="prefetch" href="/tech-blog/assets/js/131.913e5681.js"><link rel="prefetch" href="/tech-blog/assets/js/132.7af3b3c1.js"><link rel="prefetch" href="/tech-blog/assets/js/133.7b08a300.js"><link rel="prefetch" href="/tech-blog/assets/js/134.4cbe21e0.js"><link rel="prefetch" href="/tech-blog/assets/js/135.cfb400e6.js"><link rel="prefetch" href="/tech-blog/assets/js/136.4c515e9f.js"><link rel="prefetch" href="/tech-blog/assets/js/137.3bc1c00f.js"><link rel="prefetch" href="/tech-blog/assets/js/138.7f0bc946.js"><link rel="prefetch" href="/tech-blog/assets/js/139.52deaa44.js"><link rel="prefetch" href="/tech-blog/assets/js/14.9d46182b.js"><link rel="prefetch" href="/tech-blog/assets/js/15.bdca9300.js"><link rel="prefetch" href="/tech-blog/assets/js/16.1f5283b2.js"><link rel="prefetch" href="/tech-blog/assets/js/17.7fd9e43b.js"><link rel="prefetch" href="/tech-blog/assets/js/18.f29c48e0.js"><link rel="prefetch" href="/tech-blog/assets/js/19.bd50aef5.js"><link rel="prefetch" href="/tech-blog/assets/js/20.0b976459.js"><link rel="prefetch" href="/tech-blog/assets/js/21.5dff4576.js"><link rel="prefetch" href="/tech-blog/assets/js/22.0577dc77.js"><link rel="prefetch" href="/tech-blog/assets/js/23.c1fc199c.js"><link rel="prefetch" href="/tech-blog/assets/js/24.95d02d1b.js"><link rel="prefetch" href="/tech-blog/assets/js/25.6ad103a2.js"><link rel="prefetch" href="/tech-blog/assets/js/26.30482d41.js"><link rel="prefetch" href="/tech-blog/assets/js/27.f3c8317c.js"><link rel="prefetch" href="/tech-blog/assets/js/28.970a9ad4.js"><link rel="prefetch" href="/tech-blog/assets/js/29.708c0dff.js"><link rel="prefetch" href="/tech-blog/assets/js/3.4ce5f320.js"><link rel="prefetch" href="/tech-blog/assets/js/30.a8f7133e.js"><link rel="prefetch" href="/tech-blog/assets/js/31.3c2738b0.js"><link rel="prefetch" href="/tech-blog/assets/js/32.de180edc.js"><link rel="prefetch" href="/tech-blog/assets/js/33.9dcb16d6.js"><link rel="prefetch" href="/tech-blog/assets/js/34.f961d333.js"><link rel="prefetch" href="/tech-blog/assets/js/35.e7951662.js"><link rel="prefetch" href="/tech-blog/assets/js/36.b2c4e98d.js"><link rel="prefetch" href="/tech-blog/assets/js/37.0b8acb0d.js"><link rel="prefetch" href="/tech-blog/assets/js/38.fbdcba5c.js"><link rel="prefetch" href="/tech-blog/assets/js/39.f39fc4e0.js"><link rel="prefetch" href="/tech-blog/assets/js/4.43271917.js"><link rel="prefetch" href="/tech-blog/assets/js/40.bf0bb729.js"><link rel="prefetch" href="/tech-blog/assets/js/41.6603cbc7.js"><link rel="prefetch" href="/tech-blog/assets/js/42.57365e6d.js"><link rel="prefetch" href="/tech-blog/assets/js/43.596d4f46.js"><link rel="prefetch" href="/tech-blog/assets/js/44.2f6425e3.js"><link rel="prefetch" href="/tech-blog/assets/js/45.0e086616.js"><link rel="prefetch" href="/tech-blog/assets/js/46.c3c70ee8.js"><link rel="prefetch" href="/tech-blog/assets/js/47.9e34dd48.js"><link rel="prefetch" href="/tech-blog/assets/js/48.6739b6b8.js"><link rel="prefetch" href="/tech-blog/assets/js/49.7e3abea9.js"><link rel="prefetch" href="/tech-blog/assets/js/5.6b20605c.js"><link rel="prefetch" href="/tech-blog/assets/js/50.45ef9f9e.js"><link rel="prefetch" href="/tech-blog/assets/js/51.8d9d27f7.js"><link rel="prefetch" href="/tech-blog/assets/js/52.da06ab9a.js"><link rel="prefetch" href="/tech-blog/assets/js/53.a0d45bf1.js"><link rel="prefetch" href="/tech-blog/assets/js/54.54090d51.js"><link rel="prefetch" href="/tech-blog/assets/js/55.0a7a6ed2.js"><link rel="prefetch" href="/tech-blog/assets/js/56.6a47ed6e.js"><link rel="prefetch" href="/tech-blog/assets/js/57.d7362fb2.js"><link rel="prefetch" href="/tech-blog/assets/js/58.7f888059.js"><link rel="prefetch" href="/tech-blog/assets/js/59.58c76403.js"><link rel="prefetch" href="/tech-blog/assets/js/6.d0537508.js"><link rel="prefetch" href="/tech-blog/assets/js/60.7cfa9977.js"><link rel="prefetch" href="/tech-blog/assets/js/61.35b6b3b6.js"><link rel="prefetch" href="/tech-blog/assets/js/62.3f5cfe1e.js"><link rel="prefetch" href="/tech-blog/assets/js/63.02853bc6.js"><link rel="prefetch" href="/tech-blog/assets/js/64.59c1c7eb.js"><link rel="prefetch" href="/tech-blog/assets/js/65.586260ee.js"><link rel="prefetch" href="/tech-blog/assets/js/66.f2679972.js"><link rel="prefetch" href="/tech-blog/assets/js/67.a380a2a7.js"><link rel="prefetch" href="/tech-blog/assets/js/68.73dc5aed.js"><link rel="prefetch" href="/tech-blog/assets/js/69.18941a97.js"><link rel="prefetch" href="/tech-blog/assets/js/7.15347f85.js"><link rel="prefetch" href="/tech-blog/assets/js/70.b879a6ba.js"><link rel="prefetch" href="/tech-blog/assets/js/71.9cd360fc.js"><link rel="prefetch" href="/tech-blog/assets/js/72.7835f552.js"><link rel="prefetch" href="/tech-blog/assets/js/73.ec598b4f.js"><link rel="prefetch" href="/tech-blog/assets/js/74.3cefef2e.js"><link rel="prefetch" href="/tech-blog/assets/js/75.822d02c2.js"><link rel="prefetch" href="/tech-blog/assets/js/76.09c1e815.js"><link rel="prefetch" href="/tech-blog/assets/js/77.46ff07da.js"><link rel="prefetch" href="/tech-blog/assets/js/78.382b4dd5.js"><link rel="prefetch" href="/tech-blog/assets/js/79.f5555a9d.js"><link rel="prefetch" href="/tech-blog/assets/js/8.9b26252c.js"><link rel="prefetch" href="/tech-blog/assets/js/80.7037e778.js"><link rel="prefetch" href="/tech-blog/assets/js/81.78768066.js"><link rel="prefetch" href="/tech-blog/assets/js/82.98b3e753.js"><link rel="prefetch" href="/tech-blog/assets/js/83.3fc0c7ac.js"><link rel="prefetch" href="/tech-blog/assets/js/84.a14018ab.js"><link rel="prefetch" href="/tech-blog/assets/js/85.b2a693aa.js"><link rel="prefetch" href="/tech-blog/assets/js/86.7a890113.js"><link rel="prefetch" href="/tech-blog/assets/js/87.a399397f.js"><link rel="prefetch" href="/tech-blog/assets/js/88.6a768eef.js"><link rel="prefetch" href="/tech-blog/assets/js/89.499743b6.js"><link rel="prefetch" href="/tech-blog/assets/js/9.485c3228.js"><link rel="prefetch" href="/tech-blog/assets/js/90.4775ae41.js"><link rel="prefetch" href="/tech-blog/assets/js/91.ce11da28.js"><link rel="prefetch" href="/tech-blog/assets/js/92.2b0f62ae.js"><link rel="prefetch" href="/tech-blog/assets/js/93.de019744.js"><link rel="prefetch" href="/tech-blog/assets/js/94.0e3ee92b.js"><link rel="prefetch" href="/tech-blog/assets/js/95.f67fc49f.js"><link rel="prefetch" href="/tech-blog/assets/js/96.429a0f6e.js"><link rel="prefetch" href="/tech-blog/assets/js/97.bcd0519a.js"><link rel="prefetch" href="/tech-blog/assets/js/98.36015fae.js"><link rel="prefetch" href="/tech-blog/assets/js/99.c6ce69b3.js">
    <link rel="stylesheet" href="/tech-blog/assets/css/0.styles.b7ccda1f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tech-blog/" class="home-link router-link-active"><!----> <span class="site-name">先放番茄后放蛋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tech-blog/cli/" class="nav-link">
  Cli
</a></div><div class="nav-item"><a href="/tech-blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/tech-blog/promise/" class="nav-link">
  Promise
</a></div><div class="nav-item"><a href="/tech-blog/zeroToOne/" class="nav-link router-link-active">
  0 -&gt; 1
</a></div><div class="nav-item"><a href="/tech-blog/handwriting/" class="nav-link">
  插件/脚本
</a></div><div class="nav-item"><a href="/tech-blog/project/" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/tech-blog/mess/" class="nav-link">
  其它
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tech-blog/cli/" class="nav-link">
  Cli
</a></div><div class="nav-item"><a href="/tech-blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/tech-blog/promise/" class="nav-link">
  Promise
</a></div><div class="nav-item"><a href="/tech-blog/zeroToOne/" class="nav-link router-link-active">
  0 -&gt; 1
</a></div><div class="nav-item"><a href="/tech-blog/handwriting/" class="nav-link">
  插件/脚本
</a></div><div class="nav-item"><a href="/tech-blog/project/" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/tech-blog/mess/" class="nav-link">
  其它
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>loader</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>babel</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts的类型检查</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ESlint</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech-blog/zeroToOne/esLint/overview.html" class="sidebar-link">概述</a></li><li><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html" aria-current="page" class="active sidebar-link">配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#parseroptions" class="sidebar-link">parserOptions</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#parser" class="sidebar-link">parser</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#env" class="sidebar-link">env</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#globals" class="sidebar-link">globals</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#plugins" class="sidebar-link">plugins</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#extends" class="sidebar-link">extends</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#overrides" class="sidebar-link">overrides</a></li><li class="sidebar-sub-header"><a href="/tech-blog/zeroToOne/esLint/eslintrc.js.html#rules" class="sidebar-link">rules</a></li></ul></li><li><a href="/tech-blog/zeroToOne/esLint/ignore.html" class="sidebar-link">.eslintignore</a></li><li><a href="/tech-blog/zeroToOne/esLint/autoFormat.html" class="sidebar-link">自动格式化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Stylelint</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Prettier</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>gitHooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>commitlint</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>遇到的问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h1> <p>ESLint 的<a href="https://cn.eslint.org/docs/user-guide/configuring" target="_blank" rel="noopener noreferrer">配置文件优先级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是：</p> <p><code>.eslintrc.js</code> &gt;<code>.eslintrc.yaml</code>&gt;<code>.eslintrc.yml</code> &gt;<code>.eslintrc.json</code> &gt;<code>.eslintrc</code> &gt;<code>package.json</code></p> <p>以下是常用配置。</p> <h2 id="parseroptions"><a href="#parseroptions" class="header-anchor">#</a> parserOptions</h2> <p><strong>ParserOptions 选项表示 EsLint 对于不同的 Parser（解析器）配置的语言检查规则。</strong></p> <p>ESLint 默认使用<a href="https://github.com/eslint/espree" target="_blank" rel="noopener noreferrer">Espree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>作为 Parser 将代码转化为 AST。</p> <ul><li><code>ecmaVersion</code>：设置支持的 ECMAScript 版本。默认为 5 ，支持3、5、6、7、8、9 或 10 来指定你想要使用的 ECMAScript 版本，也可以使用年份，如：2015（同 6）。当然也可以使用 <code>latest</code> 表示最新的 ECMA 版本。</li> <li><code>sourceType</code>：设置支持的模块规范，默认为 <code>script</code>。支持 <code>script</code> 和 <code>module</code> (ESM) 两种配置。</li> <li><code>ecmaFeatures</code>： 它是一个对象，表示代码中可以使用的额外语言特性。</li></ul> <p>如下测试代码，不做任何配置的情况下，ESLint 检测会报错：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;xxx.xx&quot;</span> <span class="token comment">// Parsing error: The keyword 'import' is reserved</span>
<span class="token keyword">const</span> a<span class="token operator">=</span><span class="token number">100</span>     <span class="token comment">// Parsing error: The keyword 'const' is reserved</span>

<span class="token keyword">const</span> <span class="token function-variable function">jsxComp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>jsx组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>    <span class="token comment">// Parsing error: Unexpected token &lt;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>增加以下配置后正常：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span><span class="token string">'latest'</span><span class="token punctuation">,</span>  <span class="token comment">// 指定 EsLint 支持最新的 ECMA 语法检测</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>  <span class="token comment">// 设置支持的模块规范为 ES Module</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 允许代码中使用 jsx</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个时候添加一条 rules，<code>no-undef</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">'no-undef'</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span> <span class="token comment">// 禁止使用未定义的变量</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在测试代码里加一行，发现又报错了，<code>Promise</code>标红了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>   <span class="token comment">// error  'Promise' is not defined</span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这是为啥呢？</p> <p>因为<code>parserOptions</code> 中的 <code>ecmaScript</code> 为 6 或者更高版本时，仅表示 Lint 在检查时支持一些高版本的<strong>语法</strong>，比如 let、const、箭头函数等等，但是并不支持新的 Api（如 <code>Promise</code>,<code>Set</code>）。</p> <p>如何支持新的 Api？可以通过配置 <code>env.es6</code> 为 true，后面讲。</p> <h2 id="parser"><a href="#parser" class="header-anchor">#</a> parser</h2> <p>前面说了，ESLint 默认使用<a href="https://github.com/eslint/espree" target="_blank" rel="noopener noreferrer">Espree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>作为其解析器，但是 Espree 只能解析 js，如果我们要解析其它类型的文件，就需要指定其它的解析器。</p> <blockquote><p>本质上所有的解析器最终都需要将代码转化为 espree 格式（AST 的某一种规范，本质上还是 AST）从而交给 Eslint 来检测。</p></blockquote> <ul><li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/v3.0.1/docs/getting-started/linting/README.md" target="_blank" rel="noopener noreferrer">@typescript-eslint/parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这个解析器用于解析 ts。</li></ul> <p><code>yarn add @typescript-eslint/parser @typescript-eslint/eslint-plugin -D</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'@typescript-eslint'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><a href="https://github.com/vuejs/vue-eslint-parser" target="_blank" rel="noopener noreferrer">vue-eslint-parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
这个解析器能够解析 .vue 文件的 <code>&lt;template&gt;</code>  。如果在模板中使用复杂的指令和表达式，我们很容易在<code>&lt;template&gt;</code>上出错。使用该解析器配合<a href="https://github.com/vuejs/eslint-plugin-vue" target="_blank" rel="noopener noreferrer">eslint-plugin-vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的规则方便捕获错误。</li></ul> <p>该解析器的 <code>parserOptions</code>与 ESLint 的默认解析器 espree 支持的属性相同，不同的是它还支持配置<code>parserOptions.parser</code>来指定一个自定义分析器用于解析<code>&lt;script&gt;</code>标记。</p> <p>我们可以这样用：</p> <p><code>yarn add vue-eslint-parser eslint-plugin-vue -D</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;vue-eslint-parser&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 解析 &lt;template&gt; 标记</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 解析 &lt;script&gt; 标记 </span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vueFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 是否解析vue2的filter，true:按vue2的filter解析  false:按vue3位操作符解析</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 允许代码中使用 jsx</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// eslint-plugin-vue 提供的 rules 规则合集，可选值很多</span>
    <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 即 eslint-plugin-vue，用的时候省略前缀 eslint-plugin-</span>
    <span class="token string">&quot;@typescript-eslint&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="env"><a href="#env" class="header-anchor">#</a> env</h2> <p>指定 env 配置来告诉 ESLint 当前项目支持的运行环境，从而可以使用当前环境下相关的全局变量。</p> <p>开启了 <code>rules : {'no-undef': ['error']}</code>的情况下，以下代码将报错：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>  <span class="token comment">// error  'console' is not defined </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>   <span class="token comment">// error  'console' is not defined,  error  'window' is not defined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span>  <span class="token comment">// error  'console' is not defined,  error  'process' is not defined</span>
</code></pre></div><p>添加以下配置后正常：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
modules<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>env 配置项支持非常多的选项</p> <ul><li><code>browser</code>： 支持浏览器环境，表示支持浏览器环境下的相关全局变量。比如 window、document 等等</li> <li><code>node</code>： 支持 NodeJs 环境，可以使用 Node 环境下的全局变量。比如 process、global、require 等等</li> <li><code>shared-node-browser</code>： 表示可以使用 Node 环境和浏览器环境下同时存在的全局变量，比如 console 相关。</li> <li><code>es6</code>： 启用除了 modules 以外的所有 ECMAScript 6 特性（该选项会自动设置 ecmaVersion 解析器选项为 6）</li> <li><code>mocha</code>：添加所有的 Mocha 测试全局变量</li> <li>还有很多，<a href="https://cn.eslint.org/docs/user-guide/configuring#specifying-environments" target="_blank" rel="noopener noreferrer">看这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</li></ul> <p>这里注意到，之前讲过 <code>parserOptions</code> 也可以通过配置 <code>parserOptions : { ecmaVersion : 6 }</code> 来设置支持的 ECMAScript 版本，那么它和 <code>env: {es6:true}</code>有什么区别呢？</p> <ul><li><p><code>parserOptions : { ecmaVersion : 6 }</code>：仅支持新的语法，不支持新的 Api。</p></li> <li><p><code>env: {es6:true}</code>：支持新的语法和 Api，开启 <code>env: {es6:true}</code>，等同于设置了<code>parserOptions : { ecmaVersion : 6 }</code>，无需重复设置。</p></li></ul> <h2 id="globals"><a href="#globals" class="header-anchor">#</a> globals</h2> <p>之前讲到，我们可以配置 env 来告诉 ESLint 当前项目支持的运行环境，从而可以使用当前环境下相关的全局变量。</p> <p>那么，如果我们定义了一些特殊的全局变量。那么我们应该如何告诉 EsLint 呢？</p> <p>添加 <code>globals</code> 配置：</p> <blockquote><p>注：如果需要配置禁止对全局变量进行修改，需要启用<a href="http://eslint.cn/docs/rules/no-global-assign" target="_blank" rel="noopener noreferrer">no-global-assign<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>规则。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">aaa</span><span class="token operator">:</span> <span class="token string">'readonly'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bbb</span><span class="token operator">:</span> <span class="token string">'writable'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">'no-undef'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'no-global-assign'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span>  <span class="token comment">// 禁止对只读的全局变量进行修改</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div> <h2 id="plugins"><a href="#plugins" class="header-anchor">#</a> plugins</h2> <p>EsLint 默认提供了一系列内置的 Rules 规则给我们进行配置，可以在<code>/node_modules/eslint/lib/rules</code>目录下看到所有这些内置的 Rules：</p> <img src="/tech-blog/imgs/zeroToOne/eslint-rules-builtIn.jpg"> <p>但是有时候这些内置的规则并不能满足我们的需求，这种情况下就需要使用 <code>plugins</code> 对规则做一些拓展。</p> <p><strong>插件用来扩展解析器的功能，插件是<code>eslint-plugin-</code>前缀的包，配置时无需加前缀。</strong></p> <p>假如我现在自己写了一个 eslint 插件 <code>eslint-plugin-cxx</code>，里面有 n 条规则，其中一条叫<code>no-abcdefg</code>：</p> <p><code>yarn add eslint-plugin-cxx -D</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'cxx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;cxx/no-abcdefg&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意：声明了 Plugin 仅表示我们引入了该规则对应的集合，并不代表会立即启动。需要手动在 rules 中声明对应插件的规则。</p></blockquote> <h2 id="extends"><a href="#extends" class="header-anchor">#</a> extends</h2> <p>规则继承。如果我们每条 rules 都单个去配置（plugins + rules ），无疑是一件非常麻烦的事情。使用<code>extends</code>可以解决单个配置的烦恼。</p> <p>比如 EsLint 官方提供了 <code>eslint:recommended</code>，当我们在配置文件中继承 <code>eslint:recommended</code> 时，相当于启用了一系列核心规则，这些规则被 EsLint 官方维护：</p> <img src="/tech-blog/imgs/zeroToOne/eslint-recommended.jpg" style="transform:scale(0.9);"> <p><strong>所以，所谓的规则继承，其实就是继承另一份 EsLint 的 rules 配置。</strong></p> <p>写法：</p> <ul><li>ESLint 官方的扩展，比如 <code>extends: ['eslint:recommended']</code></li> <li>从 ESLint 的插件进行继承，比如 <code>extends: ['plugin:vue/essential']</code> 是<code>eslint-plugin-vue</code>插件的扩展</li> <li>从第三方的 NPM 包规则进行继承，比如 <code>extends : ['eslint-config-airbnb']</code>，配置时可以省略前缀 <code>eslint-config-</code></li> <li>从绝对路径继承而来，比如 <code>extends: [&quot;./node_modules/coding-standard/eslintDefaults.js&quot;]</code></li></ul> <p>优先级：
如果 extends 配置的是一个数组，最终会将所有规则项进行合并，出现冲突的时候，后面的会覆盖前面的
通过 rules 单独配置的规则优先级比 extends 高。</p> <h2 id="overrides"><a href="#overrides" class="header-anchor">#</a> overrides</h2> <p>使用<code>overrides</code>可以实现对不同的文件进行不同的 Lint 配置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'cxx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;no-abcdefg&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/common/api/**'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'cxx/no-abcdefg'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>  <span class="token comment">// src/common/api 目录下文件关闭 no-abcdefg 规则</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="rules"><a href="#rules" class="header-anchor">#</a> rules</h2> <ul><li>&quot;off&quot; 或 0 表示关闭本条规则检测</li> <li>&quot;warn&quot; 或 1 表示开启规则检测，使用警告级别的错误：warn (不会导致程序退出)</li> <li>&quot;error&quot; 或 2 表示开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)</li></ul> <p>如果某项规则，有额外的选项，可以通过数组进行传递，数组的第一位必须是错误级别。
如 <code>rules:{'semi': ['error', 'never']</code>}, <code>never</code> 就是额外的配置项</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tech-blog/zeroToOne/esLint/overview.html" class="prev">
        概述
      </a></span> <span class="next"><a href="/tech-blog/zeroToOne/esLint/ignore.html">
        .eslintignore
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/tech-blog/assets/js/app.0f97b9d9.js" defer></script><script src="/tech-blog/assets/js/2.b3ff26a2.js" defer></script><script src="/tech-blog/assets/js/115.858153e2.js" defer></script>
  </body>
</html>
